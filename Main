#!/bin/bash

# Detect the operating system
if [ -f /etc/os-release ]; then
    . /etc/os-release
    OS=$ID
else
    echo "Unsupported operating system."
    exit 1
fi

# Install dependencies based on the OS
if [ "$OS" = "debian" ] || [ "$OS" = "ubuntu" ]; then
    sudo apt update
    sudo apt install -y curl git # 根据需要添加其他包
elif [ "$OS" = "alpine" ]; then
    sudo apk update
    sudo apk add curl git # 根据需要添加其他包
else
    echo "Unsupported operating system."
    exit 1
fi

# Clone the repository
git clone https://github.com/liziyu12/alpine-ddns-.git || { echo "Cloning failed"; exit 1; }

# Change directory to the cloned repository
cd alpine-ddns- || { echo "Failed to enter the directory"; exit 1; }

# Make the script executable
chmod +x alpineddns

# Run the script
./alpineddns
